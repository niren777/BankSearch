(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){e.exports=a(197)},106:function(e,t,a){},108:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(11),s=a.n(r),l=(a(106),a(107),a(108),a(99)),o=a(34),c=a(35),u=a(40),d=a(36),f=a(41),h=a(87),m=a.n(h),v=a(202),p=a(94),g=a(198),k=a(199),y=a(200),E=a(201),S=a(203),B=a(37),x=a.n(B),F=a(38),b=a.n(F),C=a(23),T={ADD_BANKS:"ADD_BANKS",SAVE_SELECTED_CITY:"SAVE_SELECTED_CITY"},P=function(e){return{type:T.ADD_BANKS,payload:e}},N=function(e){return{type:T.SAVE_SELECTED_CITY,payload:e}},w=T,D=a(39),I=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).customTotal=function(e,t,a){return i.a.createElement("span",{className:"react-bootstrap-table-pagination-total"},"Showing ",e," to ",t," of ",a," Results")},e.sizePerPageList=[{text:"5",value:5},{text:"10",value:10},{text:"20",value:20}],e.bankProperties=[{dataField:"bank_name",text:"Bank Name"},{dataField:"ifsc",text:"IFSC"},{dataField:"branch",text:"Branch"},{dataField:"address",text:"Address"},{dataField:"district",text:"District"},{dataField:"state",text:"State"}],e.state={selectedCity:"",filteredBanks:[],favouriteBanks:[],selectedFilter:"",selectedFilterName:"Select Filter"},e}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({selectedCity:this.props.selectedCity}),"Select City"!==this.props.selectedCity&&this.getBanks(this.props.selectedCity);var e=JSON.parse(localStorage.getItem("favouriteBanks"));e&&this.setState({favouriteBanks:e})}},{key:"filterBanksBasedOnPagination",value:function(e){var t=0+this.state.selectedPagination,a=e.slice(0,t);this.setState({filteredBanks:a})}},{key:"markFaviourites",value:function(e){var t=JSON.parse(localStorage.getItem("favouriteBanks"));t&&(this.setState({favouriteBanks:t}),this.state.favouriteBanks.map(function(t){e.map(function(e){e.ifsc===t.ifsc&&(e.favourite=!0)})}))}},{key:"getBanks",value:function(e){var t=this,a=this.props.cities.filter(function(t){return t.city===e})[0];0===a.banks.length?m.a.get("https://vast-shore-74260.herokuapp.com/banks?city="+e).then(function(a){t.markFaviourites(a.data);var n={city:e,banks:a.data};t.props.addBanks(n),t.setState({filteredBanks:a.data})}).catch(function(e){console.log(e)}):this.setState({filteredBanks:a.banks})}},{key:"handleSearchBoxChange",value:function(e){var t=this;if("Enter"===e.key&&""!==this.state.selectedFilter){var a=e.target.value,n=this.props.cities.filter(function(e){return e.city===t.state.selectedCity})[0];if(n)if(""!==a){var i=n.banks.filter(function(e){var n=new RegExp(a,"i");return e[t.state.selectedFilter].match(n)});this.setState({filteredBanks:i})}else this.setState({filteredBanks:n.banks})}}},{key:"handleFavouriteChange",value:function(e){var t=this.state.filteredBanks.filter(function(t){return t.ifsc===e.target.value})[0];if(t.favourite=!t.favourite,t.favourite)this.state.favouriteBanks.push(t);else{var a=this.state.favouriteBanks.findIndex(function(t){return t.ifsc===e.target.value});this.state.favouriteBanks.splice(a,1)}var n=Object(l.a)({},this.state);this.setState({tempState:n}),localStorage.setItem("favouriteBanks",JSON.stringify(this.state.favouriteBanks))}},{key:"handleCityDropdownChange",value:function(e){this.setState({selectedCity:e}),this.props.setSelectedCity(e),this.getBanks(e)}},{key:"renderCityOptions",value:function(){var e=this;return this.props.cities.map(function(t){return i.a.createElement(v.a.Item,{onSelect:function(t){return e.handleCityDropdownChange(t)},eventKey:t.city},t.city)})}},{key:"handleFilterDropdownChange",value:function(e,t,a,n){console.log(e,t.target.innerHTML),this.setState({selectedFilter:e}),this.setState({selectedFilterName:t.target.innerHTML})}},{key:"renderFilterOptions",value:function(){var e=this;return this.bankProperties.map(function(t){return i.a.createElement(v.a.Item,{onSelect:function(t,a){return e.handleFilterDropdownChange(t,a)},eventKey:t.dataField},t.text)})}},{key:"favouriteButton",value:function(e,t){var a=this;return i.a.createElement(p.a,{value:e.ifsc,variant:e.favourite?"primary":"outline-primary",onClick:function(e){return a.handleFavouriteChange(e)}},"Favourite")}},{key:"render",value:function(){var e=this,t={paginationSize:4,pageStartIndex:0,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",showTotal:!0,paginationTotalRenderer:this.customTotal,sizePerPageList:this.sizePerPageList},a=[{dataField:"favourite",text:"Favourite",sort:!0,formatter:function(t,a,n){return e.favouriteButton(a,n)}},{dataField:"bank_id",text:"Bank ID",sort:!0},{dataField:"bank_name",text:"Bank Name",sort:!0},{dataField:"ifsc",text:"IFSC",sort:!0},{dataField:"branch",text:"Branch",sort:!0},{dataField:"address",text:"Address",sort:!0},{dataField:"city",text:"City",sort:!0},{dataField:"district",text:"District",sort:!0},{dataField:"state",text:"State",sort:!0}];return i.a.createElement(g.a,{className:"mt-5"},i.a.createElement(k.a,null,i.a.createElement(y.a,{lg:"2"},i.a.createElement(v.a,null,i.a.createElement(v.a.Toggle,{variant:"success",id:"city-dropdown"},this.state.selectedCity),i.a.createElement(v.a.Menu,null,this.renderCityOptions()))),i.a.createElement(y.a,{lg:"8"},i.a.createElement(k.a,null,i.a.createElement(y.a,{lg:"1"},"Search By:"),i.a.createElement(y.a,{lg:"3"},i.a.createElement(v.a,null,i.a.createElement(v.a.Toggle,{variant:"success",id:"city-dropdown"},this.state.selectedFilterName),i.a.createElement(v.a.Menu,null,this.renderFilterOptions()))),i.a.createElement(y.a,{lg:"8"},i.a.createElement(E.a,{className:"mb-3"},i.a.createElement(S.a,{placeholder:"Search...","aria-label":"Search",onKeyPress:function(t){return e.handleSearchBoxChange(t)}}))))),i.a.createElement(y.a,{lg:"2",className:"ml-0"},i.a.createElement(C.b,{to:"/favourite"},i.a.createElement(p.a,{variant:"outline-primary"},"Favourites")))),i.a.createElement(x.a,{keyField:"ifsc",data:this.state.filteredBanks,pagination:b()(t),columns:a}))}}]),t}(n.Component),O=Object(D.b)(function(e){return{cities:e.cities,selectedCity:e.selectedCity}},function(e){return{addBanks:function(t){return e(P(t))},setSelectedCity:function(t){return e(N(t))}}})(I),A=function(e){function t(){var e;Object(o.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).customTotal=function(e,t,a){return i.a.createElement("span",{className:"react-bootstrap-table-pagination-total"},"Showing ",e," to ",t," of ",a," Results")},e.sizePerPageList=[{text:"5",value:5},{text:"10",value:10}];var a=JSON.parse(localStorage.getItem("favouriteBanks"));return e.state={favouriteBanks:a||[]},e}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={paginationSize:4,pageStartIndex:0,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"First page",prePageTitle:"Pre page",firstPageTitle:"Next page",lastPageTitle:"Last page",showTotal:!0,paginationTotalRenderer:this.customTotal,sizePerPageList:this.sizePerPageList};return i.a.createElement(g.a,{className:"mt-5"},i.a.createElement(k.a,null,i.a.createElement(y.a,null,i.a.createElement(C.b,{to:"/"},i.a.createElement(p.a,{variant:"outline-primary"},"Home")))),i.a.createElement(k.a,null,i.a.createElement(y.a,{className:"mt-3"},i.a.createElement(x.a,{keyField:"ifsc",data:this.state.favouriteBanks,pagination:b()(e),columns:[{dataField:"bank_id",text:"Bank ID",sort:!0},{dataField:"bank_name",text:"Bank Name",sort:!0},{dataField:"ifsc",text:"IFSC",sort:!0},{dataField:"branch",text:"Branch",sort:!0},{dataField:"address",text:"Address",sort:!0},{dataField:"city",text:"City",sort:!0},{dataField:"district",text:"District",sort:!0},{dataField:"state",text:"State",sort:!0}]}))))}}]),t}(n.Component),L=a(19),_=a(30),j=a(97),K=a.n(j),z=a(98),M=a.n(z),R={cities:[{city:"MUMBAI",banks:[]},{city:"CHENNAI",banks:[]},{city:"KOLKATA",banks:[]},{city:"BANGALORE",banks:[]},{city:"DELHI",banks:[]}],selectedCity:"Select City"},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.ADD_BANKS:console.log(t);var a=t.payload,n=M.a.cloneDeep(e);return n.cities.filter(function(e){return e.city===a.city})[0].banks=a.banks,n;case w.SAVE_SELECTED_CITY:return e.selectedCity=t.payload,e;default:return e}};var H,V=(H=window.REDUX_INITIAL_DATA,Object(_.c)(J,H,Object(_.a)(K.a)));var Y=function(){return i.a.createElement(D.a,{store:V},i.a.createElement(C.a,{basename:"/BankSearch"},i.a.createElement("div",null,i.a.createElement(L.a,{exact:!0,path:"/",component:O}),i.a.createElement(L.a,{path:"/favourite",component:A}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[101,1,2]]]);
//# sourceMappingURL=main.59927b1d.chunk.js.map