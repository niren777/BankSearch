(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(t,e,a){t.exports=a(197)},106:function(t,e,a){},108:function(t,e,a){},197:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),r=a(11),s=a.n(r),o=(a(106),a(107),a(108),a(99)),l=a(34),c=a(35),u=a(40),d=a(36),f=a(41),h=a(87),v=a.n(h),m=a(202),g=a(94),p=a(198),k=a(199),y=a(200),E=a(201),B=a(203),S=a(37),x=a.n(S),b=a(38),C=a.n(b),F=a(23),T={ADD_BANKS:"ADD_BANKS",SAVE_SELECTED_CITY:"SAVE_SELECTED_CITY"},P=function(t){return{type:T.ADD_BANKS,payload:t}},w=function(t){return{type:T.SAVE_SELECTED_CITY,payload:t}},N=T,D=a(39),I=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(u.a)(this,Object(d.a)(e).call(this))).customTotal=function(t,e,a){return i.a.createElement("span",{className:"react-bootstrap-table-pagination-total"},"Showing ",t," to ",e," of ",a," Results")},t.sizePerPageList=[{text:"5",value:5},{text:"10",value:10},{text:"20",value:20}],t.state={selectedCity:"",filteredBanks:[],favouriteBanks:[]},t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.setState({selectedCity:this.props.selectedCity}),"Select City"!==this.props.selectedCity&&this.getBanks(this.props.selectedCity);var t=JSON.parse(localStorage.getItem("favouriteBanks"));t&&this.setState({favouriteBanks:t})}},{key:"filterBanksBasedOnPagination",value:function(t){var e=0+this.state.selectedPagination,a=t.slice(0,e);this.setState({filteredBanks:a})}},{key:"markFaviourites",value:function(t){var e=JSON.parse(localStorage.getItem("favouriteBanks"));e&&(this.setState({favouriteBanks:e}),this.state.favouriteBanks.map(function(e){t.map(function(t){t.ifsc===e.ifsc&&(t.favourite=!0)})}))}},{key:"getBanks",value:function(t){var e=this,a=this.props.cities.filter(function(e){return e.city===t})[0];0===a.banks.length?v.a.get("https://vast-shore-74260.herokuapp.com/banks?city="+t).then(function(a){e.markFaviourites(a.data);var n={city:t,banks:a.data};e.props.addBanks(n),e.setState({filteredBanks:a.data})}).catch(function(t){console.log(t)}):this.setState({filteredBanks:a.banks})}},{key:"handleSearchBoxChange",value:function(t){var e=this;if(console.log(t.target.keyCode),console.log(t.key),"Enter"===t.key){var a=t.target.value,n=this.props.cities.filter(function(t){return t.city===e.state.selectedCity})[0];if(n)if(""!==a){var i=n.banks.filter(function(t){var e=new RegExp(a,"i");return t.ifsc.match(e)});this.setState({filteredBanks:i})}else this.setState({filteredBanks:n.banks})}}},{key:"handleFavouriteChange",value:function(t){var e=this.state.filteredBanks.filter(function(e){return e.ifsc===t.target.value})[0];if(e.favourite=!e.favourite,console.log(e.favourite),e.favourite)this.state.favouriteBanks.push(e);else{console.log(this.state.favouriteBanks);var a=this.state.favouriteBanks.findIndex(function(e){return e.ifsc===t.target.value});console.log(a),console.log(t.target.value),this.state.favouriteBanks.splice(a,1)}var n=Object(o.a)({},this.state);this.setState({tempState:n}),console.log(this.state.favouriteBanks),localStorage.setItem("favouriteBanks",JSON.stringify(this.state.favouriteBanks))}},{key:"handleDropdownChange",value:function(t){console.log(t),this.setState({selectedCity:t}),this.props.setSelectedCity(t),this.getBanks(t)}},{key:"renderCityOptions",value:function(){var t=this;return console.log(this.state),this.props.cities.map(function(e){return i.a.createElement(m.a.Item,{onSelect:function(e){return t.handleDropdownChange(e)},eventKey:e.city},e.city)})}},{key:"favouriteButton",value:function(t,e){var a=this;return i.a.createElement(g.a,{value:t.ifsc,variant:t.favourite?"primary":"outline-primary",onClick:function(t){return a.handleFavouriteChange(t)}},"Favourite")}},{key:"render",value:function(){var t=this,e={paginationSize:4,pageStartIndex:0,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",showTotal:!0,paginationTotalRenderer:this.customTotal,sizePerPageList:this.sizePerPageList},a=[{dataField:"favourite",text:"Favourite",sort:!0,formatter:function(e,a,n){return t.favouriteButton(a,n)}},{dataField:"bank_id",text:"Bank ID",sort:!0},{dataField:"bank_name",text:"Bank Name",sort:!0},{dataField:"ifsc",text:"IFSC",sort:!0},{dataField:"branch",text:"Branch",sort:!0},{dataField:"address",text:"Address",sort:!0},{dataField:"city",text:"City",sort:!0},{dataField:"district",text:"District",sort:!0},{dataField:"state",text:"State",sort:!0}];return i.a.createElement(p.a,{className:"mt-5"},i.a.createElement(k.a,null,i.a.createElement(y.a,{lg:"2"},i.a.createElement(m.a,null,i.a.createElement(m.a.Toggle,{variant:"success",id:"city-dropdown"},this.state.selectedCity),i.a.createElement(m.a.Menu,null,this.renderCityOptions()))),i.a.createElement(y.a,{lg:"6"},i.a.createElement(E.a,{className:"mb-3"},i.a.createElement(B.a,{placeholder:"Search...","aria-label":"Search",onKeyPress:function(e){return t.handleSearchBoxChange(e)}}))),i.a.createElement(y.a,{lg:"4",className:"ml-0"},i.a.createElement(F.b,{to:"/favourite"},i.a.createElement(g.a,{variant:"outline-primary"},"Favourites")))),i.a.createElement(x.a,{keyField:"ifsc",data:this.state.filteredBanks,pagination:C()(e),columns:a}))}}]),e}(n.Component),O=Object(D.b)(function(t){return{cities:t.cities,selectedCity:t.selectedCity}},function(t){return{addBanks:function(e){return t(P(e))},setSelectedCity:function(e){return t(w(e))}}})(I),A=function(t){function e(){var t;Object(l.a)(this,e),(t=Object(u.a)(this,Object(d.a)(e).call(this))).customTotal=function(t,e,a){return i.a.createElement("span",{className:"react-bootstrap-table-pagination-total"},"Showing ",t," to ",e," of ",a," Results")},t.sizePerPageList=[{text:"5",value:5},{text:"10",value:10}];var a=JSON.parse(localStorage.getItem("favouriteBanks"));return t.state={favouriteBanks:a||[]},t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t={paginationSize:4,pageStartIndex:0,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"First page",prePageTitle:"Pre page",firstPageTitle:"Next page",lastPageTitle:"Last page",showTotal:!0,paginationTotalRenderer:this.customTotal,sizePerPageList:this.sizePerPageList};return i.a.createElement(p.a,{className:"mt-5"},i.a.createElement(k.a,null,i.a.createElement(y.a,null,i.a.createElement(F.b,{to:"/"},i.a.createElement(g.a,{variant:"outline-primary"},"Home")))),i.a.createElement(k.a,null,i.a.createElement(y.a,{className:"mt-3"},i.a.createElement(x.a,{keyField:"ifsc",data:this.state.favouriteBanks,pagination:C()(t),columns:[{dataField:"bank_id",text:"Bank ID",sort:!0},{dataField:"bank_name",text:"Bank Name",sort:!0},{dataField:"ifsc",text:"IFSC",sort:!0},{dataField:"branch",text:"Branch",sort:!0},{dataField:"address",text:"Address",sort:!0},{dataField:"city",text:"City",sort:!0},{dataField:"district",text:"District",sort:!0},{dataField:"state",text:"State",sort:!0}]}))))}}]),e}(n.Component),_=a(19),j=a(30),L=a(97),z=a.n(L),J=a(98),K=a.n(J),R={cities:[{city:"MUMBAI",banks:[]},{city:"CHENNAI",banks:[]}],selectedCity:"Select City"},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N.ADD_BANKS:console.log(e);var a=e.payload,n=K.a.cloneDeep(t);return n.cities.filter(function(t){return t.city===a.city})[0].banks=a.banks,n;case N.SAVE_SELECTED_CITY:return t.selectedCity=e.payload,t;default:return t}};var V,Y=(V=window.REDUX_INITIAL_DATA,Object(j.c)(M,V,Object(j.a)(z.a)));var H=function(){return i.a.createElement(D.a,{store:Y},i.a.createElement(F.a,{basename:"/BankSearch"},i.a.createElement("div",null,i.a.createElement(_.a,{exact:!0,path:"/",component:O}),i.a.createElement(_.a,{path:"/favourite",component:A}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[101,1,2]]]);
//# sourceMappingURL=main.2aad4f72.chunk.js.map